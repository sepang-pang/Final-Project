<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title> λ™νΈν μƒμ„Έ μ΅°ν νμ΄μ§€ </title>

    <!--μ‚¬μ΄νΈ κΈ°λ³Έμ„¤μ •-->
    <meta name="description" content="λ™νΈν μƒμ„Έ νμ΄μ§€">
    <meta name="keywords" content="λ™νΈν">
    <meta name="author" content="μ¤μ„Έμ°½">

    <!--Viewport-->
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum=scale=1.0, minimum=scale=1.0">

    <!--(IE10)-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Normalize -->
    <link rel="stylesheet" href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css'>

    <!--load CSS-->
    <link rel="stylesheet" href="/css/club-detail.css"> <!-- μ„λ²„ λλ¦΄ λ–„λ” ../static λΉΌμ•Όλ¨ -->

</head>
<body>
<div class="container">
    <header>
        <div class="title-group">
            <h1>κΈ€ μ λ©</h1>
            <span class="tag1">λ™νΈν λ€μ£Όμ </span>
            <span class="tag2">λ™νΈν μ†μ£Όμ </span>
        </div>
        <div class="button-group">
            <button class="btn btn-siren" aria-label="μ‹ κ³ ">π¨</button> <!-- μ‹ κ³  μ•„μ΄μ½ μμ‹ -->
            <button class="btn btn-heart" aria-label="μΆ‹μ•„μ”">β¤οΈ</button> <!-- ν•νΈ μ•„μ΄μ½ μμ‹ -->
        </div>
    </header>
</div>

<!-- section : λ³Έλ¬Έ λ‚΄μ© -->
<section>
    <header class="club-intro-header">
        <div class="photo-box">
            <img src="../images/sample.jpg" alt="λ™νΈν μ‚¬μ§„"/>
        </div>
    </header>
    <article class="club-intro-article">
        <p class="article-content">μ•λ…•ν•μ„Έμ”! μ—΄μ •μ΄ λ„μΉλ” μ¶•κµ¬ μ• νΈκ°€λ“¤μ λ¨μ„, [μ¶•κµ¬μ‹¶λƒ]μ…λ‹λ‹¤. β½οΈ
            ν•¨κ» λ•€μ„ νλ¦¬λ©°, μΆ‹μ€ μ¶”μ–µμ„ μ“μ•„κ°€λ” μ €ν¬ λ™νΈνλ” λ¨λ“  μ—°λ Ήλ€μ νμ›μ„ ν™μν•©λ‹λ‹¤. λ›°μ–΄λ‚ μ‹¤λ ¥λ³΄λ‹¤λ” μ„λ΅μ μ—΄μ •κ³Ό μ¶•κµ¬μ— λ€ν• μ‚¬λ‘μ„ κ°€μ¥ μ¤‘μ”ν•κ² μƒκ°ν•΄μ”.

            μ°λ¦¬ λ™νΈνμ νΉμ§•:

            μ£Ό 1ν μ •κΈ° λ¨μ„ λ° μ—°μµ
            μ—¬λ¬ λ™νΈνμ™€μ μΉμ„  κ²½κΈ°
            μ‹ μ… νμ› λ° μ΄λ³΄μ μ§€μ› ν”„λ΅κ·Έλ¨
            λ„κµ¬λ“ μ§€, μ–΄λ””μ„λ“ μ§€ μ¶•κµ¬μ μ¦κ±°μ›€μ„ λλ‚„ μ μλ” κ·Έλ° λ™νΈνλ¥Ό κΏκΏ‰λ‹λ‹¤. μ €ν¬μ™€ ν•¨κ» μ¶•κµ¬μ μ¦κ±°μ›€μ„ λ‚λ„κ³  μ‹¶λ‹¤λ©΄ μ–Έμ λ“  μ—°λ½μ£Όμ„Έμ”! ν•¨κ» ν–‰λ³µν• μκ°„μ„ λ§λ“¤μ–΄ κ°€μ”! β­οΈ

            κ°€μ΅± κ°™μ€ λ¶„μ„κΈ°μ—μ„ μ¶•κµ¬μ μ—΄μ •μ„ λ‚λ„κ³  μ‹¶λ‹¤λ©΄, μ§€κΈ λ°”λ΅ μ €ν¬ [μ¶•κµ¬μ‹¶λƒ]μ— κ°€μ…ν•μ„Έμ”! π‰</p>
    </article>
</section>

<!-- section : μΌμ • -->
<section class="time-table">
    <header class="time-table-header">
        <h2>μΌμ •</h2>
        <!-- λ¨μ„ μƒμ„± λ²„νΌ -->
        <button id="createMeetingBtn">λ¨μ„ μƒμ„±</button>
    </header>
    <article class="time-table-article">
        <div class="cards-container">
            <!-- μΉ΄λ“κ°€ λ“¤μ–΄κ° μλ¦¬ -->
        </div>
    </article>
</section>


<!-- section : club-info -->
<section class="club-info">
    <header class="club-info-header">
        <!-- λ²„νΌ κ·Έλ£Ή -->
        <div class="club-info-btn-group">
            <button class="club-btn">λ©¤λ²„</button>
            <button class="club-btn">μ„Έλ¶€μ •λ³΄</button>
            <button class="club-btn">λ¨μ„κΈ°λ΅</button>
            <button class="club-btn">ν™λ™μ§€μ—­</button>
            <button class="club-btn" onclick="showAlert()">μ±„ν…λ°©</button>
        </div>
    </header>

    <article class="club-info-article">
        <!-- λ™νΈνμ¥μ© article -->
        <div class="club-leader-view content-section" style="display: none;"> <!-- μ΄κΈ°μ— μ¨κΉ€ μ²λ¦¬. ν•„μ”μ— λ”°λΌ ν‘μ‹ν•κ² λ©λ‹λ‹¤. -->
            <!-- μ‹ μ²­μ λ©λ΅ -->
            <div class="applicant-list">
            </div>

            <!-- λ©¤λ²„ λ©λ΅ -->
            <div class="member-list">
            </div>
        </div>

        <!-- μΌλ° μ μ €μ© article -->
        <div class="regular-user-view content-section" style="display: none;"> <!-- μ΄κΈ°μ— μ¨κΉ€ μ²λ¦¬. ν•„μ”μ— λ”°λΌ ν‘μ‹ν•κ² λ©λ‹λ‹¤. -->
            <!-- λ©¤λ²„ λ©λ΅ -->
            <div class="member-list">
            </div>
        </div>

        <!-- μ„Έλ¶€μ •λ³΄ section -->
        <div class="detail-info content-section" style="display: none;">
            <div class="club-details">
                <div class="detail">
                    <p>λ™νΈνμ¥</p> <span class="leader-name"></span>
                </div>
                <div class="detail">
                    <p>μµλ€ μΈμ› μ</p> <span class="max-members"></span>
                </div>
                <div class="detail">
                    <p>ν™λ™λ°©μ‹</p> <span class="activity-method"></span>
                </div>
                <div class="detail">
                    <p>κ°€μ…μ μ°¨</p> <span class="join-method"></span>
                </div>
            </div>
        </div>

        <!-- λ¨μ„κΈ°λ΅ section -->
        <div class="meeting-record content-section" style="display: none;">
            <div class="completed-meetings-list">
                <!-- μ—¬κΈ°μ— μ™„λ£λ λ¨μ„ λ‚΄μ©μ΄ μ¶”κ°€λ©λ‹λ‹¤. -->
            </div>
        </div>

        <!-- ν™λ™μ§€μ—­ section -->
        <div class="activity-area content-section" style="display: none;">
            <div id="map" style="width:100%;height:350px;"></div>
        </div>
        <!--        &lt;!&ndash; μ±„ν…λ°© section &ndash;&gt;-->
        <!--        <div class="chat-room content-section" style="display: none;">-->
        <!--            <H1> μ±„ν…λ°© </H1>-->
        <!--        </div>-->
    </article>
</section>

<!-- Footer Section -->
<footer>
    <div class="footer-content">
        <div class="footer-section">
            <h4>μ£Όκ΄€</h4>
            <p>μ¤νλ¥΄νƒ€ μ½”λ”©ν΄λ½</p>
        </div>
        <div class="footer-section">
            <h4>ν€</h4>
            <p>λ–΅μλ§μ„ λ°©λ²”λ€</p>
        </div>
        <div class="footer-section">
            <h4>λ©¤λ²„</h4>
            <p>μ¤μ„Έμ°½, κ³ μ€λΉ„, κΉ€λ™ν™, μ΄κ²½μ›</p>
        </div>
        <div class="footer-section">
            <h4>λ¬Έμ λ©”μΌ</h4>
            <p><a href="mailto:tpckd0533@naver.com">tpckd0533@naver.com</a></p>
        </div>
    </div>
</footer>

<!-- Create Meeting Modal -->
<div id="createMeetingModal" class="modal">
    <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header">
            <span class="close">&times;</span>
        </div>

        <!-- Modal Body - Page 1 -->
        <div class="modal-body-page1">
            <!-- Top section -->
            <section>
                <input type="text" id="title" placeholder="λ¨μ„μ μ΄λ¦„μ„ μ‘μ„±ν•΄μ£Όμ„Έμ”">
            </section>

            <!-- Bottom section -->
            <section>
                <textarea id="description" placeholder="λ¨μ„ λ‚΄μ©μ„ μ‘μ„±ν•΄μ£Όμ„Έμ”"></textarea>
            </section>
        </div>

        <!-- Modal Body - Page 2 -->
        <div class="modal-body-page2">
            <!-- Top section -->
            <section>
                <label for="maxMember">λ‡ λ…μ΄μ„ λ¨μΌκΉμ” ?</label>
                <input type="range" id="maxMember" min="5" max="30" step="1" value="5">
                <output for="maxMember">5λ…</output>
            </section>

            <!-- Middle section -->
            <section class="date-section">
                <!-- Header section -->
                <header class="date-section-header">
                    <label for="date">μ–Έμ  λ§λ‚ κΉμ” ?</label>
                </header>

                <!-- Article section -->
                <article class="date-section-article">
                    <div class="datetime-inputs">
                        <input type="date" id="date">
                        <select id="ampm">
                            <option value="μ¤μ „">μ¤μ „</option>
                            <option value="μ¤ν›„">μ¤ν›„</option>
                        </select>
                        <input type="number" id="hour" min="0" max="12" placeholder="hh">
                        <span>:</span>
                        <input type="number" id="minute" min="0" max="59" placeholder="mm">
                    </div>
                </article>
            </section>

            <!-- Bottom section -->
            <section>
                <label for="place">μ–΄λ””μ„ λ§λ‚ κΉμ” ?</label>
                <input type="text" id="place" placeholder="μ£Όμ† μ…λ ¥">
            </section>
        </div>

        <!-- Modal Footer -->
        <div class="modal-footer">
            <button id="prevButton">μ΄μ „</button>
            <button id="nextButton">λ‹¤μ</button>
            <button id="submitButton">μ™„λ£</button>
        </div>
    </div>
</div>

<!-- μ‹ κ³ μ°½ λ¨λ‹¬ -->
<div id="reportModal" class="report-modal">
    <div class="report-modal-content">
        <span class="close-report-modal">&times;</span>
        <h2>μ‹ κ³ ν•κΈ°</h2>
        <input type="text" id="reportTitle" placeholder="μ‹ κ³  μ λ©μ„ μ…λ ¥ν•μ„Έμ”" required>
        <textarea id="reportContent" rows="4" placeholder="μ‹ κ³  λ‚΄μ©μ„ μ…λ ¥ν•μ„Έμ”" required></textarea>
        <button id="submitReport">μ‹ κ³  μ μ¶</button>
    </div>
</div>


<!----------------------------------------JS ---------------------------------------->
<script th:inline="javascript">
    window.onload = function () {
        const clubId = [[${clubId}]]; // clubμ μ•„μ΄λ””λ¥Ό PathVariableλ΅ λ°›μ•„μ΄.
        const currentUsername = [[${currentUsername}]];
        const clubUsername = [[${clubUsername}]];
        const likeStatus = [[${likeStatus}]]; // λ™νΈν μ° μƒνƒ
        const heartBtn = document.querySelector(".btn-heart");
        const sirenBtn = document.querySelector(".btn-siren");

        // ============== λ²„νΌ ν΄λ¦­ μ‹ μ„μΉλ¥Ό μ μ‹ λ³€κ²½ν•λ” ν•¨μ ============== //
        function animateButton(btn) {
            btn.style.transition = "transform 0.1s";
            btn.style.transform = "translate(1px, 1px)";
            setTimeout(() => {
                btn.style.transition = "background-color 0.1s, transform 0.1s";
                btn.style.transform = "translate(0, 0)";
            }, 100);  // ν΄λ¦­ ν›„ 0.1μ΄ μ§€λ‚λ©΄ μ›λ μ„μΉλ΅ λμ•„μ΄
        }

        // ========================================================== //


        // ============== λ™νΈν κ΄€μ‹¬ λ©λ΅ λ‹΄κΈ° μ„¤μ • ============== //
        let isLiked = likeStatus; // likeStatus κ°’μ„ κΈ°λ°μΌλ΅ isLiked μ΄κΈ°ν™”

        heartBtn.addEventListener('click', function () {
            if (isLiked) {
                deleteLikeClub(clubId); // κ΄€μ‹¬ λ™νΈν μ·¨μ† API νΈμ¶
            } else {
                addLikeClub(clubId); // λ™νΈν μ° λ‹΄κΈ° API νΈμ¶
            }
            isLiked = !isLiked; // μƒνƒ μ „ν™
        });
        // ================================================ //

        document.getElementById('place').addEventListener('click', function () {
            new daum.Postcode({
                oncomplete: function (data) {
                    // κ²°κ³Όκ°’μ—μ„ μ£Όμ† μ •λ³΄ κ°€μ Έμ™€μ„ inputμ— ν‘μ‹
                    document.getElementById('place').value = data.roadAddress;
                }
            }).open();
        });


        sirenBtn.addEventListener("click", function () {
            animateButton(sirenBtn);  // μ• λ‹λ©”μ΄μ… μ μ©
        });


        // λ²„νΌ ν΄λ¦­ μ‹ μ„Ήμ…μ„ λ³΄μ—¬μ£Όλ” ν•¨μ
        const buttonToSectionMapping = {
            "μ„Έλ¶€μ •λ³΄": "detail-info",
            "λ¨μ„κΈ°λ΅": "meeting-record",
            "ν™λ™μ§€μ—­": "activity-area",
            "μ±„ν…λ°©": "chat-room"
        };

        // λ¨λ“  μ„Ήμ…μ„ κ°€μ Έμµλ‹λ‹¤.
        let sections = document.querySelectorAll('.content-section');

        document.querySelector('.club-info-btn-group').addEventListener('click', function (e) {
            if (e.target.classList.contains('club-btn')) {
                // λ¨λ“  μ„Ήμ…μ„ μ¨κΉλ‹λ‹¤.
                sections.forEach(section => {
                    section.style.display = 'none';
                });

                // μ±„ν…λ°©μ„ λλ €μ„ λ• κ²½κ³ μ°½μ„ λ„μ›λ‹λ‹¤.
                if (e.target.textContent === "μ±„ν…λ°©") {
                    alert("μ±„ν…λ°©μ€ μ¤€λΉ„ μ¤‘μ…λ‹λ‹¤.");
                }

                if (e.target.textContent === "λ©¤λ²„") {
                    if (currentUsername === clubUsername) {
                        document.querySelector('.club-leader-view').style.display = 'block';
                    } else {
                        document.querySelector('.regular-user-view').style.display = 'block';
                    }
                } else {
                    // ν΄λ¦­λ λ²„νΌμ— ν•΄λ‹Ήν•λ” μ„Ήμ…λ§ λ³΄μ—¬μ¤λ‹λ‹¤.
                    let sectionToShow = buttonToSectionMapping[e.target.textContent];
                    if (sectionToShow) {
                        document.querySelector(`.${sectionToShow}`).style.display = 'block';
                    }
                }
            }
        });

        // λ™νΈνμ¥μΈμ§€ μΌλ° μ μ €μΈμ§€μ— λ”°λΌ ν™”λ©΄μ„ λ‹¤λ¥΄κ² ν‘μ‹
        const clubLeaderView = document.querySelector('.club-leader-view');
        const regularUserView = document.querySelector('.regular-user-view');

        if (currentUsername === clubUsername) {
            clubLeaderView.style.display = 'block';
            regularUserView.style.display = 'none';
        } else {
            clubLeaderView.style.display = 'none';
            regularUserView.style.display = 'block';
        }

        // ================================================== //

        // API νΈμ¶
        fetch(`/api/clubs/${clubId}`) // νƒ€μ„λ¦¬ν”„λ΅ λ°›μ•„μ¨ Id κ°’μ„ μ£Όμ… ν›„ API νΈμ¶
            .then(response => {
                if (!response.ok) {
                    throw new Error("Network response was not ok");
                }
                return response.json();
            })
            .then(data => {
                // λ°›μ•„μ¨ DTO μ ν•„λ“κ°’μ„ ν™”λ©΄μ— μ¶λ ¥
                document.querySelector('h1').textContent = data.name; // λ™νΈν μ΄λ¦„
                document.querySelector('.tag1').textContent = data.major; // λ™νΈν λ€μ£Όμ 
                document.querySelector('.tag2').textContent = data.minor; // λ™νΈν μ†μ£Όμ 
                document.querySelector('.photo-box img').src = data.media; // λ™νΈν μ‚¬μ§„
                document.querySelector('.article-content').textContent = data.description; // λ™νΈν μ†κ°κΈ€
                document.querySelector('.leader-name').textContent = data.nickName; // λ™νΈνμ¥ μ΄λ¦„
                document.querySelector('.max-members').textContent = data.maxMember; // μµλ€ μΈμ› μ
                document.querySelector('.activity-method').textContent = data.activityType; // ν™λ™ λ°©μ‹
                document.querySelector('.join-method').textContent = data.joinType; // κ°€μ… λ°©μ‹

                // μ§€λ„λ¥Ό μƒμ„±ν•©λ‹λ‹¤
                const mapContainer = document.getElementById('map');
                const mapOption = {
                    center: new kakao.maps.LatLng(33.450701, 126.570667), // μ°μ„  μ„μ‹λ΅ μ¤‘μ‹¬ μΆν‘λ¥Ό μ„¤μ •
                    level: 3
                };
                const map = new kakao.maps.Map(mapContainer, mapOption);

                // μ£Όμ†-μΆν‘ λ³€ν™ κ°μ²΄ μƒμ„±
                const geocoder = new kakao.maps.services.Geocoder();

                // μ£Όμ†λ΅ μΆν‘λ¥Ό κ²€μƒ‰
                geocoder.addressSearch(data.locate, function (result, status) {
                    if (status === kakao.maps.services.Status.OK) {
                        map.setCenter(new kakao.maps.LatLng(result[0].y, result[0].x)); // μ§€λ„μ μ¤‘μ‹¬ μΆν‘λ¥Ό κ²€μƒ‰ κ²°κ³Ό μΆν‘λ΅ μ„¤μ •
                    } else {
                        console.log('κ²€μƒ‰ κ²°κ³Όκ°€ μ—†μµλ‹λ‹¤.');
                    }
                });
            })
            .catch(error => {
                console.error("There was a problem with the fetch operation:", error.message);
            });


        // /{clubId}/uncompleted API νΈμ¶
        fetch(`/api/meetings/${clubId}/uncompleted`)
            .then(response => {
                if (!response.ok) {
                    throw new Error("Network response was not ok");
                }
                return response.json();
            })
            .then(meetings => {
                const cardsContainer = document.querySelector('.cards-container');
                meetings.forEach(meeting => {
                    const meetingCardHTML = `
                <div class="card">
                    <div class="card-title-section">
                        <h3 class="card-date">${meeting.date}</h3>
                        <h4 class="card-title">${meeting.title}</h4>
                    </div>
                    <div class="card-info-section">
                        <p>μΌμ‹ <span class="card-time">${meeting.dateDetail}</span></p>
                        <p>μ„μΉ <span class="card-location">${meeting.place}</span></p>
                        <p>μ°Έμ—¬μΈμ› <span class="card-participants">${meeting.memberCount} / ${meeting.maxMember}</span></p>
                    </div>
                </div>
            `;
                    cardsContainer.innerHTML += meetingCardHTML;
                });
            })
            .catch(error => {
                console.error("There was a problem with the fetch operation:", error.message);
            });

        fetch(`/api/meetings/${clubId}/completed`)
            .then(response => {
                if (!response.ok) {
                    throw new Error("Network response was not ok");
                }
                return response.json();
            })
            .then(completedMeetings => {
                const completedMeetingsList = document.querySelector('.completed-meetings-list');

                completedMeetings.forEach(meeting => {
                    const meetingItemHTML = `
            <div class="completed-meeting-item">
                <h4>${meeting.description}</h4>
                <p>λ‚ μ§: ${meeting.date}</p>
                <p>λ“κΈ€ μ: ${meeting.commentCount}</p>
            </div>
            `;
                    completedMeetingsList.innerHTML += meetingItemHTML;
                });
            })
            .catch(error => {
                console.error("There was a problem with the fetch operation:", error.message);
            });


        fetch(`/api/clubs/${clubId}/applies`) // μ‹ μ²­μ λ©λ΅μ„ νΈμ¶
            .then(response => response.json())
            .then(applies => {
                const applicantList = document.querySelector('.applicant-list');
                applies.forEach(apply => {
                    const applicantHTML = `
                        <div class="applicant">
                            <div class="profile-pic"></div>
                            <div class="nickname">${apply.nickName}</div>
                            <div class="action-buttons">
                                <button class="accept-btn" data-apply-id="${apply.id}">μΉμΈ</button>
                                <button class="reject-btn" data-apply-id="${apply.id}">κ±°μ </button>
                            </div>
                        </div>
                    `;
                    applicantList.innerHTML += applicantHTML;
                });
            });

        // λ©¤λ²„ λ©λ΅ λ¶λ¬μ¤κΈ°
        fetch(`/api/clubs/${clubId}/members`)
            .then(response => response.json())
            .then(members => {
                const memberList = document.querySelectorAll('.member-list');  // λ™νΈνμ¥ & μΌλ° μ μ €μ©
                members.forEach(member => {
                    const memberHTML = `
                        <div class="member">
                            <div class="profile-pic"></div>
                            <div class="nickname">${member.nickName}</div>
                        </div>
                    `;
                    memberList.forEach(list => list.innerHTML += memberHTML);
                });
            });

        document.body.addEventListener('click', function (event) {
            if (event.target.classList.contains('accept-btn')) {
                const applyId = event.target.getAttribute('data-apply-id');

                fetch(`/api/clubs/applies/${applyId}/approve`, {
                    method: 'PUT'
                }).then(response => {
                    if (response.ok) {
                        alert('κ°€μ… μΉμΈ μ™„λ£!');
                        event.target.parentElement.parentElement.remove();  // μ‹ μ²­μ ν•­λ© μ κ±°
                    } else {
                        alert('μ¤λ¥ λ°μƒ. λ‹¤μ‹ μ‹λ„ν•μ„Έμ”.');
                    }
                });
            } else if (event.target.classList.contains('reject-btn')) {
                const applyId = event.target.getAttribute('data-apply-id');

                fetch(`/api/clubs/applies/${applyId}/refuse`, {
                    method: 'PUT'
                }).then(response => {
                    if (response.ok) {
                        alert('κ°€μ… κ±°μ  μ™„λ£!');
                        event.target.parentElement.parentElement.remove();  // μ‹ μ²­μ ν•­λ© μ κ±°
                    } else {
                        alert('μ¤λ¥ λ°μƒ. λ‹¤μ‹ μ‹λ„ν•μ„Έμ”.');
                    }
                });
            }
        });


        // ===================== λ™νΈν μ° λ“±λ΅  ===================== //
        function addLikeClub(clubId) {
            // μ”μ²­ λ°μ΄ν„° μ„¤μ •
            const requestData = {
                clubId: clubId
            };

            // fetch API μ‚¬μ©ν•μ—¬ API νΈμ¶
            fetch('/api/profile/like-club', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(requestData)
            })
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                })
                .catch(error => {
                    console.error('Error:', error);
                });
        }

        // ========================================================== //

        // ===================== λ™νΈν μ° ν•΄μ   ===================== //
        function deleteLikeClub(clubId) {
            // fetch API μ‚¬μ©ν•μ—¬ 'κ΄€μ‹¬ λ™νΈν μ·¨μ†' API νΈμ¶
            fetch(`/api/profile/like-club/${clubId}`, {
                method: 'DELETE'
            })
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                })
                .catch(error => {
                    console.error('Error:', error);
                });
        }

        // ========================================================== //

        // ===================== λ¨μ„ μƒμ„± λ¨λ‹¬μ°½ ===================== //
        let modal = document.getElementById("createMeetingModal");
        let btn = document.getElementById("createMeetingBtn");
        let span = document.getElementsByClassName("close")[0];
        let nextButton = document.getElementById("nextButton");
        let prevButton = document.getElementById("prevButton");
        let submitButton = document.getElementById("submitButton");
        let slider = document.getElementById("maxMember");
        let output = document.querySelector("output[for='maxMember']");

        btn.onclick = function () {
            modal.style.display = "block";
            document.querySelector(".modal-body-page1").style.display = "block";
            document.querySelector(".modal-body-page2").style.display = "none";
            nextButton.style.display = "block";
            prevButton.style.display = "none";
            submitButton.style.display = "none";
        }

        span.onclick = function () {
            modal.style.display = "none";
        }

        nextButton.onclick = function () {
            document.querySelector(".modal-body-page1").style.display = "none";
            document.querySelector(".modal-body-page2").style.display = "block";
            nextButton.style.display = "none";
            prevButton.style.display = "block";
            submitButton.style.display = "block";
        }

        prevButton.onclick = function () {
            document.querySelector(".modal-body-page1").style.display = "block";
            document.querySelector(".modal-body-page2").style.display = "none";
            nextButton.style.display = "block";
            prevButton.style.display = "none";
            submitButton.style.display = "none";
        }

        // ===================== μ¬λΌμ΄λ” μΈμ› μ λ³€ν™” ===================== //
        slider.oninput = function () {
            output.textContent = this.value + "λ…";
        }
        // ============================================================= //

        // Submit form and create meeting
        submitButton.onclick = function () {
            let title = document.getElementById("title").value;
            let description = document.getElementById("description").value;
            let maxMember = document.getElementById("maxMember").value;
            let date = document.getElementById("date").value;
            let ampm = document.getElementById("ampm").value;
            let hour = document.getElementById("hour").value;
            let minute = document.getElementById("minute").value;
            let place = document.getElementById("place").value;

            // Format date and time
            if (ampm === "μ¤ν›„" && hour !== "12") {
                hour = parseInt(hour) + 12;
            }
            let formattedDate = `${date} ${hour}:${minute}`;

            let meetingRequestDto = {
                title: title,
                description: description,
                maxMember: maxMember,
                place: place,
                date: formattedDate
            }

            // ===================== λ¨μ„ μƒμ„± API νΈμ¶ ===================== //
            fetch(`/api/meetings/${clubId}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(meetingRequestDto),
            })
                .then(response => {
                    if (response.ok) {
                        alert('λ¨μ„μ΄ μƒμ„±λμ—μµλ‹λ‹¤.');
                        window.location.reload();
                    } else {
                        alert('μ¤λ¥ λ°μƒ. λ‹¤μ‹ μ‹λ„ν•μ„Έμ”.');
                    }
                });
        }

        const reportModal = document.getElementById('reportModal');
        const closeBtn = document.querySelector('.close-report-modal');
        const submitReportBtn = document.getElementById('submitReport');

        // λ¨λ‹¬μ„ λ„μ°λ” μ΄λ²¤νΈ
        sirenBtn.addEventListener('click', function () {
            reportModal.style.display = 'block';
        });

        // λ¨λ‹¬ λ‹«κΈ° μ΄λ²¤νΈ
        closeBtn.addEventListener('click', function () {
            reportModal.style.display = 'none';
        });

        // μ‹ κ³  μ μ¶ μ΄λ²¤νΈ
        submitReportBtn.addEventListener('click', function () {
            const title = document.getElementById('reportTitle').value;
            const content = document.getElementById('reportContent').value;

            const reportData = {
                targetId: clubId, // μ΄λ―Έ clubIdλ¥Ό κ°€μ Έμ™”κΈ° λ•λ¬Έμ— μ‚¬μ© κ°€λ¥
                title: title,
                content: content
            };

            fetch("/api/report/club", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(reportData)
            })
                .then(response => {
                    if (response.ok) { // response μƒνƒκ°€ okμΈμ§€ ν™•μΈ
                        return response.json(); // μ‘λ‹µμ„ json ν•νƒλ΅ λ°ν™
                    } else {
                        throw new Error('μ‹ κ³  μ¤‘ μ¤λ¥κ°€ λ°μƒν–μµλ‹λ‹¤.');
                    }
                })
                .then(data => {
                    alert("μ‹ κ³ κ°€ μ™„λ£λμ—μµλ‹λ‹¤.");
                    reportModal.style.display = 'none'; // λ¨λ‹¬ λ‹«κΈ°
                })
                .catch(error => {
                    alert(error.message);
                });
        });
    }
</script>
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=94d5cbf2c7b1151b1ca7e03a028094c2&libraries=services"></script>
</body>
</html>
