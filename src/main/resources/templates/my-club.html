<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title th:text="${pageTitle}"> 동적 제목 </title>

    <!--Viewport-->
    <meta content="width=device-width, user-scalable=no, initial-scale=1.0, maximum=scale=1.0, minimum=scale=1.0"
          name="viewport">

    <!--(IE10)-->
    <meta content="IE=edge" http-equiv="X-UA-Compatible">

    <!-- Normalize -->
    <link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css' rel="stylesheet">

    <!--load CSS-->
    <link href="/css/my-club.css" rel="stylesheet">
</head>

<body>
<div class="container">
    <header>
        <div class="title-group">
            <h1 th:text="${pageTitle}">동적 제목</h1>
        </div>
    </header>
</div>
<section class="club-body">
    <!-- 동호회 목록 -->
    <table class="all-club">
        <thead>
        <tr>
            <th>동호회</th>
        </tr>
        </thead>
        <tbody>
        <!-- Thymeleaf를 이용하여 반복 출력 -->
        <tr th:each="club, rowStat : ${clubs}">
            <td>
                <!-- 버을 클릭하면 상세 페이지로 이동하도록 링크 추가 -->
                <a class="btn-club" th:href="'/api/club-detail/' + ${club.clubId}">
                    <img th:src="${club.media}" alt="동호회 사진">
                    <div class="right-space">
                        <span class="minor" th:text="${club.minor}"></span>
                        <span class="name" th:text="${club.name}"></span>
                        <span class="maxMember" th:text="'정원:' + ${club.maxMember}"></span>
                    </div>
                </a>
            </td>
        </tr>
        </tbody>
    </table>
    <!-- 버튼 -->
    <section class="btn-group">
        <button class="btn btn-primary" id="goBackButton" onclick="back()" type="button">뒤로</button>
        <button class="btn btn-primary" id="btn-create" type="create">동호회 개설</button>
    </section>
</section>
<!-- Footer Section -->
<footer>
    <div class="footer-content">
        <div class="footer-section">
            <h4>주관</h4>
            <p>스파르타 코딩클럽</p>
        </div>
        <div class="footer-section">
            <h4>팀</h4>
            <p>떡잎마을 방범대</p>
        </div>
        <div class="footer-section">
            <h4>멤버</h4>
            <p>오세창, 고은비, 김동환, 이경원</p>
        </div>
        <div class="footer-section">
            <h4>문의 메일</h4>
            <p><a href="mailto:tpckd0533@naver.com">tpckd0533@naver.com</a></p>
        </div>
    </div>
</footer>
<!--load JS-->
<script>
    document.getElementById('loginForm').addEventListener('submit', async (e) => {
        e.preventDefault();

        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;

        try {
            const response = await fetch('/api/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ username, password })
            });

            const data = await response.json();

            if (response.status === 200) {
                alert(data.message);
                window.location.href = "/sub-main";
            } else {
                alert("로그인 실패: " + data.message);
            }
        } catch (error) {
            console.error('There was an error during the login process:', error);
        }
    });
</script>
</body>
</html>